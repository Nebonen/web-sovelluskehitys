import"./style-CE2F9O3O.js";import{f as d}from"./fetch-DtqXA3eh.js";const g=async()=>{const t=await d("http://localhost:3000/api/items");if(t.error){console.error("getItems() error:",t.error);return}console.log("getItems() response:",t)},i=document.querySelector(".info_dialog"),y=document.querySelector(".info_dialog button");y.addEventListener("click",()=>{i.close()});const l=document.getElementById("snackbar"),u=(o,t="")=>{l.innerText=o,l.className=`show ${t}`.trim(),setTimeout(()=>{l.className=l.className.replace("show","").trim()},3e3)},p=async()=>{const o="http://localhost:3000/api/users";let t={};t={Authorization:`Bearer ${localStorage.getItem("token")}`};const s={headers:t};console.log(s);const e=await d(o,s);if(e.error){console.log("Tapahtui virhe fetch haussa!!");return}console.log(e);const a=document.querySelector(".tbody");a.innerHTML="",e.forEach(n=>{const c=document.createElement("tr");c.innerHTML=`
        <td>${n.username}</td>
        <td>${n.email}</td>
        <td><button class="check" data-id="${n.user_id}">Info</button></td>
        <td><button class="del" data-id="${n.user_id}">Delete</button></td>
        <td>${n.user_id}</td>
      `,a.appendChild(c)}),h()},h=()=>{const o=document.querySelectorAll(".check");console.log(o),o.forEach(t=>{t.addEventListener("click",async r=>{console.log("Klikkasit nappulaa:",r.target);const s=r.target.dataset.id;console.log("Haetaan tietoja k√§ytt√§j√§lle id:ll√§:",s);const e=await m(s);console.log(e),e&&(i.querySelector("p").innerHTML="",i.showModal(),i.querySelector("p").innerHTML=`
          <div>User ID: <span>${e.user_id}</span></div>
          <div>User Name: <span>${e.username}</span></div>
          <div>Email: <span>${e.email}</span></div>
          <div>Role: <span>${e.user_level}</span></div>`)})})},m=async o=>{const t=await d(`http://localhost:3000/api/users/${o}`);return t.error?(console.error(`Error fetching item with ID ${o}:`,t.error),alert(`Error: ${t.error}`),null):t},f=async o=>{o.preventDefault();const t=document.querySelector("#username").value.trim(),r=document.querySelector("#password").value.trim(),s=document.querySelector("#email").value.trim(),e="http://localhost:3000/api/users",n={body:JSON.stringify({username:t,password:r,email:s}),method:"POST",headers:{"Content-type":"application/json"}};console.log(n);const c=await d(e,n);if(c.error){console.log(c.error),u("Virhe l√§hett√§misess√§, t√§yt√§ kaikki vaadittavat kent√§t!","error");return}c.message&&(console.log(c.message),u("Onnistunut k√§ytt√§j√§n lis√§√§minen :) üíï","success")),console.log(c),document.querySelector(".addform").reset(),p()};async function k(){try{const t=await(await fetch("http://localhost:3000/api/entries")).json(),r=document.querySelector(".card-area2");r.innerHTML="",r.style.display="flex",r.style.flexWrap="wrap",r.style.gap="20px",r.style.justifyContent="center",t.forEach(s=>{const e=document.createElement("div");e.style.width="400px",e.style.padding="15px",e.style.borderRadius="15px",e.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.1)",e.style.backgroundColor="#fff",e.style.display="flex",e.style.alignItems="center",e.style.gap="15px";const a=document.createElement("img");a.src="../img/developers.jpg",a.alt="Diary",a.style.width="200px",a.style.height="250px",a.style.borderRadius="10px";const n=document.createElement("div");n.innerHTML=`
          <p><strong>Date:</strong> ${s.entry_date}</p>
          <p><strong>Mood:</strong> ${s.mood}</p>
          <p><strong>Weight:</strong> ${s.weight} kg</p>
          <p><strong>Sleep:</strong> ${s.sleep_hours} hours</p>
          <p><strong>Notes:</strong> ${s.notes}</p>
        `,e.appendChild(a),e.appendChild(n),r.appendChild(e)})}catch(o){console.error("Virhe haettaessa p√§iv√§kirjamerkint√∂j√§:",o)}}document.querySelector("#app").innerHTML="Moi t√§ss√§ oman APIn harjoituksia";const v=document.querySelector(".get_items");v.addEventListener("click",g);const S=document.querySelector(".get_users");S.addEventListener("click",p);const w=document.querySelector(".formpost");w.addEventListener("click",f);const E=document.querySelector(".formget");E.addEventListener("click",m);const $=document.querySelector(".get_entries");$.addEventListener("click",k);
